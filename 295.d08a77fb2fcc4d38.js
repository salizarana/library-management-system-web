"use strict";(self.webpackChunkLMSWeb=self.webpackChunkLMSWeb||[]).push([[295],{8295:(H,g,s)=>{s.r(g),s.d(g,{UserModule:()=>$});var U=s(6895),h=s(3060),e=s(4650),c=s(5938),p=s(529);let d=(()=>{class t{constructor(o){this.http=o,this.apiUrl="https://localhost:44318/api/"}getUser(o){const n=(new p.LE).set("json",JSON.stringify(o));return this.http.get(this.apiUrl+"User/GetUser",{params:n})}setUser(o){return this.http.post(this.apiUrl+"User/UserTsk",{json:JSON.stringify(o)})}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(p.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=s(9549),_=s(4144),m=s(4006);let Z=(()=>{class t{constructor(o,n,i){this.dialogRef=o,this.data=n,this.us=i,this.saveSuccess=new e.vpe,this.formObject={name:"",emailAddress:"",phone:"",userName:"",password:""}}ngOnInit(){"edit"==this.data.mode.toLowerCase()&&(this.formObject={...this.data.data});const o=localStorage.getItem("user");if(o){const n=JSON.parse(o);this.formObject.userPersonId=n.res[0].userId}}save(){console.log(this.formObject),this.us.setUser(this.formObject).subscribe(o=>{this.dialogRef.close(o),this.saveSuccess.emit(!0),o&&(console.log(o),console.log("received"))})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(c.so),e.Y36(c.WI),e.Y36(d))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-form"]],outputs:{saveSuccess:"saveSuccess"},decls:33,vars:6,consts:[["appearance","fill"],["matInput","","placeholder","User","name","name",3,"ngModel","ngModelChange"],["matInput","","placeholder","Email","name","emailAddress",3,"ngModel","ngModelChange"],["matInput","","placeholder","Phone","name","phone",3,"ngModel","ngModelChange"],["matInput","","placeholder","Username","name","userName",3,"ngModel","disabled","ngModelChange"],["matInput","","placeholder","Password","name","password",3,"ngModel","ngModelChange"],[1,"btn"],[1,"primary-btn",3,"click"],[1,"secondary-btn",3,"mat-dialog-close"]],template:function(o,n){1&o&&(e.TgZ(0,"h3"),e._uU(1,"Edit User Details"),e.qZA(),e.TgZ(2,"form")(3,"p")(4,"mat-form-field",0)(5,"mat-label"),e._uU(6,"User"),e.qZA(),e.TgZ(7,"input",1),e.NdJ("ngModelChange",function(a){return n.formObject.name=a}),e.qZA()()(),e.TgZ(8,"p")(9,"mat-form-field",0)(10,"mat-label"),e._uU(11,"Email"),e.qZA(),e.TgZ(12,"input",2),e.NdJ("ngModelChange",function(a){return n.formObject.emailAddress=a}),e.qZA()()(),e.TgZ(13,"p")(14,"mat-form-field",0)(15,"mat-label"),e._uU(16,"Phone"),e.qZA(),e.TgZ(17,"input",3),e.NdJ("ngModelChange",function(a){return n.formObject.phone=a}),e.qZA()()(),e.TgZ(18,"p")(19,"mat-form-field",0)(20,"mat-label"),e._uU(21,"Username"),e.qZA(),e.TgZ(22,"input",4),e.NdJ("ngModelChange",function(a){return n.formObject.userName=a}),e.qZA()()(),e.TgZ(23,"p")(24,"mat-form-field",0)(25,"mat-label"),e._uU(26,"Password"),e.qZA(),e.TgZ(27,"input",5),e.NdJ("ngModelChange",function(a){return n.formObject.password=a}),e.qZA()()()(),e.TgZ(28,"div",6)(29,"button",7),e.NdJ("click",function(){return n.save()}),e._uU(30,"Save"),e.qZA(),e.TgZ(31,"button",8),e._uU(32,"close"),e.qZA()()),2&o&&(e.xp6(7),e.Q6J("ngModel",n.formObject.name),e.xp6(5),e.Q6J("ngModel",n.formObject.emailAddress),e.xp6(5),e.Q6J("ngModel",n.formObject.phone),e.xp6(5),e.Q6J("ngModel",n.formObject.userName)("disabled",!0),e.xp6(5),e.Q6J("ngModel",n.formObject.password))},dependencies:[u.KE,u.hX,_.Nt,c.ZT,m._Y,m.Fj,m.JJ,m.JL,m.On,m.F],styles:["form[_ngcontent-%COMP%]{padding:20px;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px}mat-label[_ngcontent-%COMP%]{color:#333;font-weight:700}mat-form-field[_ngcontent-%COMP%]{width:100%}  .mat-form-field-placeholder{color:#999}  .mat-form-field-appearance-fill .mat-form-field-flex{border-color:#007bff;box-shadow:0 0 5px #007bff80}h3[_ngcontent-%COMP%]{padding-left:20px;font-weight:500}.btn[_ngcontent-%COMP%]{margin-left:10px}button[_ngcontent-%COMP%]{color:#fff;background-color:#085c9a;border-color:#085c9a;border-width:3px;border-style:solid;padding:5px 13px;border-radius:8px;font-size:14px;margin-left:10px;transition:.3s;cursor:pointer}button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}button[disabled][_ngcontent-%COMP%]{color:#000;background-color:#bdbdbd}.primary-btn[_ngcontent-%COMP%]{background-color:#085c9a;color:#fff;transition:.3s}.primary-btn[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.mat-button-disabled[_ngcontent-%COMP%]{background-color:#bdbdbd}.secondary-btn[_ngcontent-%COMP%]{background-color:#fff;border-color:#085c9a;transition:.3s;color:#000}.secondary-btn[_ngcontent-%COMP%]:hover{transform:scale(1.05)}"]}),t})(),O=(()=>{class t{constructor(o,n,i){this.dialogRef=o,this.data=n,this.us=i,this.formObject={userId:"",name:"",emailAddress:"",phone:"",userName:"",membershipType:"",startDate:"",endDate:"",totalBorrowed:"",currentBorrowedBooks:"",availableBorrow:"",returnedBooks:"",membershipDaysLeft:"",maxBorrow:""}}ngOnInit(){"detail"==this.data.mode.toLowerCase()&&(this.formObject={...this.data.data},console.log(this.formObject))}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(c.so),e.Y36(c.WI),e.Y36(d))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-detail"]],decls:54,vars:13,consts:[[1,"container"],[1,"profile"],["src","../../../../assets/img/user.png",1,"profile-pic"],[1,"details"],["mat-button","",1,"secondary-btn",3,"mat-dialog-close"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.TgZ(3,"h3"),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA()(),e.TgZ(7,"div",3)(8,"p")(9,"span"),e._uU(10,"Name:"),e.qZA(),e._uU(11),e.qZA(),e.TgZ(12,"p")(13,"span"),e._uU(14,"Phone:"),e.qZA(),e._uU(15),e.qZA(),e.TgZ(16,"p")(17,"span"),e._uU(18,"Membership:"),e.qZA(),e._uU(19),e.qZA(),e.TgZ(20,"p")(21,"span"),e._uU(22,"Start Date:"),e.qZA(),e._uU(23),e.qZA(),e.TgZ(24,"p")(25,"span"),e._uU(26,"End Date"),e.qZA(),e._uU(27),e.qZA(),e.TgZ(28,"p")(29,"span"),e._uU(30,"Total Books Borrowed:"),e.qZA(),e._uU(31),e.qZA(),e.TgZ(32,"p")(33,"span"),e._uU(34,"Currently Borrowed:"),e.qZA(),e._uU(35),e.qZA(),e.TgZ(36,"p")(37,"span"),e._uU(38,"Available Borrow:"),e.qZA(),e._uU(39),e.qZA(),e.TgZ(40,"p")(41,"span"),e._uU(42,"Returned Books:"),e.qZA(),e._uU(43),e.qZA(),e.TgZ(44,"p")(45,"span"),e._uU(46,"Borrow Limit:"),e.qZA(),e._uU(47),e.qZA(),e.TgZ(48,"p")(49,"span"),e._uU(50,"Membership Days Left:"),e.qZA(),e._uU(51),e.qZA()(),e.TgZ(52,"button",4),e._uU(53,"Close"),e.qZA()()),2&o&&(e.xp6(4),e.Oqu(n.formObject.userName),e.xp6(2),e.Oqu(n.formObject.emailAddress),e.xp6(5),e.hij(" ",n.formObject.name,""),e.xp6(4),e.hij(" ",n.formObject.phone,""),e.xp6(4),e.hij(" ",n.formObject.membershipType,""),e.xp6(4),e.hij(" ",n.formObject.startDate,""),e.xp6(4),e.hij(" ",n.formObject.endDate,""),e.xp6(4),e.hij(" ",n.formObject.totalBorrowed,""),e.xp6(4),e.hij(" ",n.formObject.currentBorrowedBooks," "),e.xp6(4),e.Oqu(n.formObject.availableBorrow),e.xp6(4),e.Oqu(n.formObject.returnedBooks),e.xp6(4),e.Oqu(n.formObject.maxBorrow),e.xp6(4),e.Oqu(n.formObject.membershipDaysLeft))},dependencies:[c.ZT],styles:[".container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;width:330px}.profile[_ngcontent-%COMP%]{text-align:center;border-radius:100px}.profile-pic[_ngcontent-%COMP%]{width:60px;border-radius:50%;background-color:#e4e4e4}.profile[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1px;font-weight:500}.profile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.details[_ngcontent-%COMP%]{border-top:1px solid #ccc;padding:20px}.details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0}.details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;display:inline-block;width:200px}.details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #ccc}"]}),t})();var b=s(7392),l=s(7155),C=s(266);function T(t,r){1&t&&(e.TgZ(0,"th",14),e._uU(1,"No."),e.qZA())}function M(t,r){if(1&t&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&t){const o=r.index;e.xp6(1),e.hij(" ",o+1," ")}}function x(t,r){1&t&&(e.TgZ(0,"th",14),e._uU(1,"Id"),e.qZA())}function A(t,r){if(1&t&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.xp6(1),e.Oqu(o.userId)}}function w(t,r){1&t&&(e.TgZ(0,"th",14),e._uU(1,"Name"),e.qZA())}function q(t,r){if(1&t&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.xp6(1),e.Oqu(o.name)}}function v(t,r){1&t&&(e.TgZ(0,"th",14),e._uU(1,"Username"),e.qZA())}function y(t,r){if(1&t&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.xp6(1),e.Oqu(o.userName)}}function P(t,r){1&t&&(e.TgZ(0,"th",14),e._uU(1,"Membership Type"),e.qZA())}function j(t,r){if(1&t&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.xp6(1),e.Oqu(o.membershipType)}}function N(t,r){1&t&&(e.TgZ(0,"th",14),e._uU(1,"Remaining Days"),e.qZA())}function B(t,r){if(1&t&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.xp6(1),e.Oqu(o.membershipDaysLeft)}}function D(t,r){1&t&&(e.TgZ(0,"th",14),e._uU(1,"Currently Borrowed"),e.qZA())}function k(t,r){if(1&t&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.xp6(1),e.hij(" ",o.currentBorrowedBooks," ")}}function Y(t,r){1&t&&(e.TgZ(0,"th",14),e._uU(1,"Available Borrow"),e.qZA())}function J(t,r){if(1&t&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.xp6(1),e.Oqu(o.availableBorrow)}}function I(t,r){1&t&&(e.TgZ(0,"th",14),e._uU(1,"Action"),e.qZA())}function S(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"td",15)(1,"button",16),e.NdJ("click",function(){const a=e.CHM(o).$implicit,f=e.oxw();return e.KtG(f.view(a))}),e.TgZ(2,"mat-icon",17),e._uU(3,"visibility"),e.qZA()(),e.TgZ(4,"button",16),e.NdJ("click",function(){const a=e.CHM(o).$implicit,f=e.oxw();return e.KtG(f.edit(a))}),e.TgZ(5,"mat-icon",18),e._uU(6,"edit"),e.qZA()()()}}function F(t,r){1&t&&e._UZ(0,"tr",19)}function Q(t,r){1&t&&e._UZ(0,"tr",20)}const z=[{path:"",component:(()=>{class t{constructor(o,n){this.us=o,this.dialog=n,this.displayedColumns=["position","userId","name","userName","membershipType","membershipDaysLeft","currentBorrowedBooks","availableBorrow","action"]}ngOnInit(){this.getUser()}edit(o){this.dialog.open(Z,{data:{data:o,mode:"Edit"}}).componentInstance.saveSuccess.subscribe(()=>{this.getUser()})}view(o){this.dialog.open(O,{data:{data:o,mode:"Detail"}})}getUser(){this.us.getUser({}).subscribe(n=>{n&&(this.userList=n,this.dataSource=n.sort((i,a)=>a.userId-i.userId),console.log(this.dataSource))})}selectedRowDetail(o,n){this.selectedRowData=o,this.selectedIndex=n}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(d),e.Y36(c.uw))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user"]],decls:32,vars:3,consts:[["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userId"],["matColumnDef","name"],["matColumnDef","userName"],["matColumnDef","membershipType"],["matColumnDef","membershipDaysLeft"],["matColumnDef","currentBorrowedBooks"],["matColumnDef","availableBorrow"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",1,"action-button",3,"click"],["matTooltip","View Details"],["matTooltip","Edit User"],["mat-header-row",""],["mat-row",""]],template:function(o,n){1&o&&(e.TgZ(0,"h3"),e._uU(1,"Users"),e.qZA(),e.TgZ(2,"table",0),e.ynx(3,1),e.YNc(4,T,2,0,"th",2),e.YNc(5,M,2,1,"td",3),e.BQk(),e.ynx(6,4),e.YNc(7,x,2,0,"th",2),e.YNc(8,A,2,1,"td",3),e.BQk(),e.ynx(9,5),e.YNc(10,w,2,0,"th",2),e.YNc(11,q,2,1,"td",3),e.BQk(),e.ynx(12,6),e.YNc(13,v,2,0,"th",2),e.YNc(14,y,2,1,"td",3),e.BQk(),e.ynx(15,7),e.YNc(16,P,2,0,"th",2),e.YNc(17,j,2,1,"td",3),e.BQk(),e.ynx(18,8),e.YNc(19,N,2,0,"th",2),e.YNc(20,B,2,1,"td",3),e.BQk(),e.ynx(21,9),e.YNc(22,D,2,0,"th",2),e.YNc(23,k,2,1,"td",3),e.BQk(),e.ynx(24,10),e.YNc(25,Y,2,0,"th",2),e.YNc(26,J,2,1,"td",3),e.BQk(),e.ynx(27,11),e.YNc(28,I,2,0,"th",2),e.YNc(29,S,7,0,"td",3),e.BQk(),e.YNc(30,F,1,0,"tr",12),e.YNc(31,Q,1,0,"tr",13),e.qZA()),2&o&&(e.xp6(2),e.Q6J("dataSource",n.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[b.Hw,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,C.gM],styles:["h3[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.add-book[_ngcontent-%COMP%]{margin-bottom:10px;margin-top:15px;transition:transform .2s}.add-book[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.mat-table[_ngcontent-%COMP%]{width:100%;border-radius:5px;overflow:auto;box-shadow:0 2px 5px #0f0f0f1a}.mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .3s}.mat-header-row[_ngcontent-%COMP%]:hover, .mat-row[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{padding:12px;font-size:14px;text-align:left;border-bottom:none}.mat-header-cell[_ngcontent-%COMP%]{font-weight:700;color:#333}button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#085c9a;cursor:pointer;padding:6px 9px;border-radius:100px;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{color:#dca11d;transform:scale(1.1)}mat-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:4px}.action-button[_ngcontent-%COMP%]{margin-right:8px}"]}),t})(),canActivate:[s(3870).a]}];let E=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.Bz.forChild(z),h.Bz]}),t})(),$=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[d],imports:[U.ez,E,p.JF,b.Ps,_.c,u.lN,c.Is,m.u5,l.p0,C.AV]}),t})()}}]);