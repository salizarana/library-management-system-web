"use strict";(self.webpackChunkLMSWeb=self.webpackChunkLMSWeb||[]).push([[675],{4675:(nt,E,d)=>{d.r(E),d.d(E,{BorrowModule:()=>et});var _=d(6895),R=d(3060),t=d(4650),f=d(5938),v=d(529);let w=(()=>{class a{constructor(e){this.http=e,this.apiUrl="https://localhost:44318/api/"}getBorrow(e){const i=(new v.LE).set("json",JSON.stringify(e));return this.http.get(this.apiUrl+"Borrow/GetBorrow",{params:i})}setBorrow(e){return this.http.post(this.apiUrl+"Borrow/BorrowTsk",{json:JSON.stringify(e)})}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(v.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),z=(()=>{class a{constructor(e){this.http=e,this.apiUrl="https://localhost:44318/api/"}setCharge(e){return this.http.post(this.apiUrl+"Common/CalculateBorrowTsk",{json:JSON.stringify(e)})}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(v.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Z(a,r){if(1&a&&(t.TgZ(0,"div",9)(1,"p",10),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"table")(5,"tr")(6,"th"),t._uU(7,"Borrow ID"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA()(),t.TgZ(10,"tr")(11,"th"),t._uU(12,"Customer Name"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA()(),t.TgZ(15,"tr")(16,"th"),t._uU(17,"Username"),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA()(),t.TgZ(20,"tr")(21,"th"),t._uU(22,"Book"),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.qZA()(),t.TgZ(25,"tr")(26,"th"),t._uU(27,"Borrow Date"),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.ALo(30,"date"),t.qZA()(),t.TgZ(31,"tr")(32,"th"),t._uU(33,"Return Date"),t.qZA(),t.TgZ(34,"td"),t._uU(35),t.ALo(36,"date"),t.qZA()(),t.TgZ(37,"tr")(38,"th"),t._uU(39,"Return Due Date"),t.qZA(),t.TgZ(40,"td"),t._uU(41),t.ALo(42,"date"),t.qZA()()(),t.TgZ(43,"div",11)(44,"p")(45,"span"),t._uU(46,"Total:"),t.qZA(),t._uU(47),t.qZA()()()),2&a){const e=t.oxw();t.xp6(2),t.hij(" Date: ",t.xi3(3,9,e.formObject.returnedDate,"yyyy-MM-dd HH:mm:ss")," "),t.xp6(7),t.Oqu(e.data.selectedItem.borrowId),t.xp6(5),t.Oqu(e.data.selectedItem.name),t.xp6(5),t.Oqu(e.data.selectedItem.userName),t.xp6(5),t.Oqu(e.data.selectedItem.title),t.xp6(5),t.Oqu(t.lcZ(30,12,e.data.selectedItem.borrowedDate)),t.xp6(6),t.Oqu(t.lcZ(36,14,e.formObject.returnedDate)),t.xp6(6),t.Oqu(t.lcZ(42,16,e.data.selectedItem.returnDueDate)),t.xp6(6),t.hij(" Rs ",e.charge,"")}}let j=(()=>{class a{constructor(e,i,n,s){this.dialogRef=e,this.data=i,this.bs=n,this.is=s,this.saveSuccess=new t.vpe,this.formObject={borrowId:"",userId:"",bookId:"",returnedDate:"",returnDueDate:"",charge:"",userPersonId:""}}ngOnInit(){"add"==this.data.mode.toLowerCase()&&(this.formObject.borrowId=this.data.borrowId,this.formObject.userId=this.data.userId,this.formObject.bookId=this.data.bookId,this.formObject.returnedDate=this.data.returnedDate,console.log(this.data.borrowId)),console.log(this.data.bookId),this.selectedItem=this.data.selectedItem,this.calculateCharge();const e=localStorage.getItem("user");if(e){const i=JSON.parse(e);console.log("Parsed user data:",i),i.res&&i.res.length>0&&(this.formObject.userPersonId=i.res[0].userId,console.log("User ID:",i.res[0].userId))}console.log("abababa",this.formObject.charge)}calculateCharge(){const i=(new Date).toISOString().split("T")[0]+"T00:00:00";this.is.setCharge({borrowId:this.data.borrowId,returnedDate:i,returnDueDate:this.data.returnDueDate}).subscribe(n=>{console.log("Server response:",n),this.charge=n[0].charge,console.log("Charge:",this.charge)},n=>{console.error("Error calculating charge:",n)})}save(){this.formObject.charge=this.charge,console.log(this.formObject),this.bs.setBorrow(this.formObject).subscribe(e=>{this.dialogRef.close(e),this.saveSuccess.emit(!0),e&&(console.log("kkkkk",e),console.log("received"))})}print(){window.print()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(f.so),t.Y36(f.WI),t.Y36(w),t.Y36(z))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-book-return"]],outputs:{saveSuccess:"saveSuccess"},decls:16,vars:1,consts:[[1,"invoice"],[1,"invoice-header"],[1,"logo"],[1,"invoice-title"],["class","invoice-details",4,"ngIf"],[1,"primary-btn",3,"click"],[1,"tertiary-btn",3,"click"],[1,"secondary-btn",3,"mat-dialog-close"],[1,"btn-group"],[1,"invoice-details"],[1,"date"],[1,"invoice-total"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2)(3,"span"),t._uU(4,"L"),t.qZA(),t._uU(5,"MS"),t.qZA(),t.TgZ(6,"h1",3),t._uU(7,"Invoice"),t.qZA()(),t.YNc(8,Z,48,18,"div",4),t.qZA(),t.TgZ(9,"button",5),t.NdJ("click",function(){return i.save()}),t._uU(10,"Save"),t.qZA(),t.TgZ(11,"button",6),t.NdJ("click",function(){return i.print()}),t._uU(12,"Print"),t.qZA(),t.TgZ(13,"button",7),t._uU(14,"close"),t.qZA(),t._UZ(15,"div",8)),2&e&&(t.xp6(8),t.Q6J("ngIf",i.data.selectedItem))},dependencies:[_.O5,f.ZT,_.uU],styles:[".invoice[_ngcontent-%COMP%]{font-family:Arial,sans-serif;border:1px solid #ccc;padding:20px;border-radius:5px;background-color:#f9f9f9;box-shadow:0 0 10px #0000001a}.invoice-header[_ngcontent-%COMP%]{text-align:center}.invoice-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:#085c9a;font-weight:500}.invoice-title[_ngcontent-%COMP%]{font-size:20px}.invoice-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#dca11d;font-size:35px}.invoice-details[_ngcontent-%COMP%]{margin-top:20px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #ddd}th[_ngcontent-%COMP%]{text-align:left;background-color:#f2f2f2}.invoice-total[_ngcontent-%COMP%]{margin-top:20px;text-align:right;margin-right:65px}.invoice-total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:15px}.invoice-total[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700}.btn-group[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{margin-top:20px;margin-right:10px}.invoice-details[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px}"]}),a})();var h=d(3238),A=d(4859),T=d(4385),P=d(266),m=d(1281),D=d(7579),k=d(9549);function H(a,r){if(1&a&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function U(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mat-form-field",16)(1,"mat-select",17),t.NdJ("selectionChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s._changePageSize(n.value))}),t.YNc(2,H,2,2,"mat-option",18),t.qZA()()}if(2&a){const e=t.oxw(2);t.Q6J("appearance",e._formFieldAppearance)("color",e.color),t.xp6(1),t.Q6J("value",e.pageSize)("disabled",e.disabled)("aria-label",e._intl.itemsPerPageLabel),t.xp6(1),t.Q6J("ngForOf",e._displayedPageSizeOptions)}}function $(a,r){if(1&a&&(t.TgZ(0,"div",20),t._uU(1),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(e.pageSize)}}function G(a,r){if(1&a&&(t.TgZ(0,"div",12)(1,"div",13),t._uU(2),t.qZA(),t.YNc(3,U,3,6,"mat-form-field",14),t.YNc(4,$,2,1,"div",15),t.qZA()),2&a){const e=t.oxw();t.xp6(2),t.hij(" ",e._intl.itemsPerPageLabel," "),t.xp6(1),t.Q6J("ngIf",e._displayedPageSizeOptions.length>1),t.xp6(1),t.Q6J("ngIf",e._displayedPageSizeOptions.length<=1)}}function q(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.firstPage())}),t.O4$(),t.TgZ(1,"svg",7),t._UZ(2,"path",22),t.qZA()()}if(2&a){const e=t.oxw();t.Q6J("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),t.uIk("aria-label",e._intl.firstPageLabel)}}function Q(a,r){if(1&a){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.lastPage())}),t.O4$(),t.TgZ(1,"svg",7),t._UZ(2,"path",24),t.qZA()()}if(2&a){const e=t.oxw();t.Q6J("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),t.uIk("aria-label",e._intl.lastPageLabel)}}let y=(()=>{class a{constructor(){this.changes=new D.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,i,n)=>{if(0==n||0==i)return`0 of ${n}`;const s=e*i;return`${s+1} \u2013 ${s<(n=Math.max(n,0))?Math.min(s+i,n):s+i} of ${n}`}}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const K={provide:y,deps:[[new t.FiY,new t.tp0,y]],useFactory:function W(a){return a||new y}},X=new t.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS"),ee=(0,h.Id)((0,h.dB)(class{}));let te=(()=>{class a extends ee{constructor(e,i,n){if(super(),this._intl=e,this._changeDetectorRef=i,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.page=new t.vpe,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),n){const{pageSize:s,pageSizeOptions:o,hidePageSize:l,showFirstLastButtons:u}=n;null!=s&&(this._pageSize=s),null!=o&&(this._pageSizeOptions=o),null!=l&&(this._hidePageSize=l),null!=u&&(this._showFirstLastButtons=u)}}get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max((0,m.su)(e),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=(0,m.su)(e),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max((0,m.su)(e),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(i=>(0,m.su)(i)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(e){this._hidePageSize=(0,m.Ig)(e)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(e){this._showFirstLastButtons=(0,m.Ig)(e)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const n=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(n)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,i)=>e-i),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return a.\u0275fac=function(e){t.$Z()},a.\u0275dir=t.lG2({type:a,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons"},outputs:{page:"page"},features:[t.qOj]}),a})(),V=(()=>{class a extends te{constructor(e,i,n){super(e,i,n),n&&null!=n.formFieldAppearance&&(this._formFieldAppearance=n.formFieldAppearance)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(y),t.Y36(t.sBO),t.Y36(X,8))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[t.qOj],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,G,5,3,"div",2),t.TgZ(3,"div",3)(4,"div",4),t._uU(5),t.qZA(),t.YNc(6,q,3,5,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return i.previousPage()}),t.O4$(),t.TgZ(8,"svg",7),t._UZ(9,"path",8),t.qZA()(),t.kcU(),t.TgZ(10,"button",9),t.NdJ("click",function(){return i.nextPage()}),t.O4$(),t.TgZ(11,"svg",7),t._UZ(12,"path",10),t.qZA()(),t.YNc(13,Q,3,5,"button",11),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("ngIf",!i.hidePageSize),t.xp6(3),t.hij(" ",i._intl.getRangeLabel(i.pageIndex,i.pageSize,i.length)," "),t.xp6(1),t.Q6J("ngIf",i.showFirstLastButtons),t.xp6(1),t.Q6J("matTooltip",i._intl.previousPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("matTooltipPosition","above")("disabled",i._previousButtonsDisabled()),t.uIk("aria-label",i._intl.previousPageLabel),t.xp6(3),t.Q6J("matTooltip",i._intl.nextPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("matTooltipPosition","above")("disabled",i._nextButtonsDisabled()),t.uIk("aria-label",i._intl.nextPageLabel),t.xp6(3),t.Q6J("ngIf",i.showFirstLastButtons))},dependencies:[k.KE,T.gD,h.ey,A.lW,_.O5,_.sg,P.gM],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}\n"],encapsulation:2,changeDetection:0}),a})(),ae=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[K],imports:[[_.ez,A.ot,T.LD,P.AV,h.BQ]]}),a})();var ie=d(6308),O=d(2687),p=d(7155);function ne(a,r){1&a&&(t.TgZ(0,"th",19),t._uU(1,"No."),t.qZA())}function re(a,r){if(1&a&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.hij(" ",e.position," ")}}function se(a,r){1&a&&(t.TgZ(0,"th",19),t._uU(1,"Id"),t.qZA())}function oe(a,r){if(1&a&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.borrowId)}}function le(a,r){1&a&&(t.TgZ(0,"th",19),t._uU(1,"Customer Name"),t.qZA())}function de(a,r){if(1&a&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.name)}}function ce(a,r){1&a&&(t.TgZ(0,"th",19),t._uU(1,"Book"),t.qZA())}function he(a,r){if(1&a&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.title)}}function pe(a,r){1&a&&(t.TgZ(0,"th",19),t._uU(1,"Borrowed Date"),t.qZA())}function ue(a,r){if(1&a&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.borrowedDate)}}function _e(a,r){1&a&&(t.TgZ(0,"th",19),t._uU(1,"Return Due Date"),t.qZA())}function me(a,r){if(1&a&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.returnDueDate)}}function ge(a,r){1&a&&(t.TgZ(0,"th",19),t._uU(1,"Returned Date"),t.qZA())}function fe(a,r){if(1&a&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.returnedDate)}}function ve(a,r){1&a&&(t.TgZ(0,"th",19),t._uU(1,"Charge"),t.qZA())}function De(a,r){if(1&a&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.hij("Rs.",e.charge,"")}}function ye(a,r){1&a&&(t.TgZ(0,"th",19),t._uU(1,"Payment Id"),t.qZA())}function be(a,r){if(1&a&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.paymentId)}}function Ce(a,r){1&a&&(t.TgZ(0,"th",21),t._uU(1,"Action"),t.qZA())}function Me(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"td",20)(1,"button",22),t.NdJ("click",function(){const s=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.return(s.borrowId,s.userId,s.bookId,s.returnDueDate))}),t._uU(2," Return "),t.qZA()()}if(2&a){const e=r.$implicit;t.xp6(1),t.Q6J("disabled",e.returnedDate)}}function xe(a,r){1&a&&t._UZ(0,"tr",23)}function we(a,r){1&a&&t._UZ(0,"tr",24)}function Ae(a,r){1&a&&(t.TgZ(0,"tr",25)(1,"td",26),t._uU(2,"No data matching the filter"),t.qZA()())}const ke=function(){return[5,10,25,100]},Ee=[{path:"",component:(()=>{class a{constructor(e,i,n){this.bs=e,this.dialog=i,this._liveAnnouncer=n,this.displayedColumns=["borrowId","name","title","borrowedDate","returnDueDate","returnedDate","charge","paymentId","action"]}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(e){const i=e.target?.value?.trim().toLowerCase()||"";this.dataSource.filter=i}ngOnInit(){this.getBorrow()}return(e,i,n,s){const o=this.borrowList.find(l=>l.borrowId===e);if(o){const l=new Date;this.dialog.open(j,{data:{mode:"add",borrowId:e,userId:i,bookId:n,returnDueDate:s,returnedDate:l,selectedItem:o},disableClose:!0}).componentInstance.saveSuccess.subscribe(()=>{this.getBorrow()})}}getBorrow(){this.bs.getBorrow({}).subscribe(i=>{i&&(this.borrowList=i,this.dataSource=i.sort((n,s)=>s.borrowId-n.borrowId))})}selectedRowDetail(e,i){this.selectedRowData=e,this.selectedIndex=i}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(w),t.Y36(f.uw),t.Y36(O.Kd))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-borrow"]],viewQuery:function(e,i){if(1&e&&(t.Gf(V,5),t.Gf(ie.YE,5)),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},decls:38,vars:6,consts:[["mat-sort",""],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","borrowId"],["matColumnDef","name"],["matColumnDef","title"],["matColumnDef","borrowedDate"],["matColumnDef","returnDueDate"],["matColumnDef","returnedDate"],["matColumnDef","charge"],["matColumnDef","paymentId"],["matColumnDef","action"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-icon-button","","color","warn",1,"primary-btn",3,"disabled","click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,i){1&e&&(t.TgZ(0,"h3"),t._uU(1,"Books Issued"),t.qZA(),t.TgZ(2,"div",0)(3,"table",1),t.ynx(4,2),t.YNc(5,ne,2,0,"th",3),t.YNc(6,re,2,1,"td",4),t.BQk(),t.ynx(7,5),t.YNc(8,se,2,0,"th",3),t.YNc(9,oe,2,1,"td",4),t.BQk(),t.ynx(10,6),t.YNc(11,le,2,0,"th",3),t.YNc(12,de,2,1,"td",4),t.BQk(),t.ynx(13,7),t.YNc(14,ce,2,0,"th",3),t.YNc(15,he,2,1,"td",4),t.BQk(),t.ynx(16,8),t.YNc(17,pe,2,0,"th",3),t.YNc(18,ue,2,1,"td",4),t.BQk(),t.ynx(19,9),t.YNc(20,_e,2,0,"th",3),t.YNc(21,me,2,1,"td",4),t.BQk(),t.ynx(22,10),t.YNc(23,ge,2,0,"th",3),t.YNc(24,fe,2,1,"td",4),t.BQk(),t.ynx(25,11),t.YNc(26,ve,2,0,"th",3),t.YNc(27,De,2,1,"td",4),t.BQk(),t.ynx(28,12),t.YNc(29,ye,2,0,"th",3),t.YNc(30,be,2,1,"td",4),t.BQk(),t.ynx(31,13),t.YNc(32,Ce,2,0,"th",14),t.YNc(33,Me,3,1,"td",4),t.BQk(),t.YNc(34,xe,1,0,"tr",15),t.YNc(35,we,1,0,"tr",16),t.YNc(36,Ae,3,0,"tr",17),t._UZ(37,"mat-paginator",18),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("dataSource",i.dataSource),t.xp6(31),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(5,ke)))},dependencies:[p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,p.Ee,V],styles:["h3[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.add-book[_ngcontent-%COMP%]{margin-bottom:10px;margin-top:15px;transition:transform .2s}.add-book[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.mat-table[_ngcontent-%COMP%]{width:100%;border-radius:5px;box-shadow:0 2px 5px #0f0f0f1a}.mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .3s}.mat-header-row[_ngcontent-%COMP%]{background-color:#eaeaea;position:sticky;top:30px;z-index:1000}.mat-header-row[_ngcontent-%COMP%]:hover, .mat-row[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{padding:12px;font-size:14px;text-align:left;border-bottom:none}.mat-header-cell[_ngcontent-%COMP%]{font-weight:700;color:#333}mat-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:4px}button[disabled][_ngcontent-%COMP%]{cursor:not-allowed}"]}),a})(),canActivate:[d(3870).a]}];let Re=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[R.Bz.forChild(Ee),R.Bz]}),a})();var Te=d(7392),F=d(4144),b=d(4006),Y=d(8184),Pe=d(4080),Ve=d(8605);d(727),d(9521),d(7340);let Be=(()=>{class a{constructor(){this.changes=new D.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,i){return`${e} \u2013 ${i}`}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const qe={provide:new t.OlP("mat-datepicker-scroll-strategy"),deps:[Y.aV],useFactory:function Ge(a){return()=>a.scrollStrategies.reposition()}};let Xe=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[Be,qe],imports:[[_.ez,A.ot,Y.U8,O.rt,Pe.eL,h.BQ],Ve.ZD]}),a})(),et=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[w],imports:[_.ez,Re,v.JF,Te.Ps,F.c,k.lN,f.Is,b.u5,p.p0,Xe,ae]}),a})()}}]);